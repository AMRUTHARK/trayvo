name: Keep Render Alive

on:
  schedule:
    # Run every 10 minutes to keep Render backend alive
    # This prevents the free tier from spinning down
    - cron: '*/10 * * * *'
  workflow_dispatch: # Allow manual trigger

jobs:
  ping:
    runs-on: ubuntu-latest
    steps:
      - name: Ping Render Backend
        run: |
          # IMPORTANT: Replace with your actual Render backend URL
          # Example: https://multi-shop-billing-api.onrender.com
          BACKEND_URL="${BACKEND_URL:-https://your-backend.onrender.com}"
          
          echo "ğŸ”„ Pinging Render backend to keep it alive..."
          echo "URL: $BACKEND_URL/health"
          
          # Ping the health endpoint
          if curl -f -s --max-time 30 "$BACKEND_URL/health" > /dev/null; then
            echo "âœ… Backend is alive and responding"
          else
            echo "âš ï¸  Backend may be starting up (this is normal for free tier)"
          fi
          
          echo "âœ… Keep-alive ping completed"
          
      - name: Summary
        run: |
          echo "ğŸ“ This workflow runs every 10 minutes to prevent Render free tier spin-down"
          echo "ğŸ’¡ To disable: Delete this file or disable the workflow in GitHub Actions"

